[program:worker]
; https://python-rq.org/patterns/supervisor/
directory=/app
environment=FLASK_APP=autoapp.py,DD_SERVICE=%(ENV_DD_SERVICE)s-worker
command=ddtrace-run flask rq worker printing-default --quiet
process_name=%(program_name)s-%(process_num)s
numprocs=%(ENV_ASYNC_WORKERS)s

; RQ requires the TERM signal to perform a warm shutdown. If RQ does not die
; within 10 seconds, supervisor will forcefully kill it
stopsignal=TERM

autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0